<p-dialog [(visible)]="mostrar"  [style]="{width: '80%'}" header="Detalles del empleado" [modal]="true" styleClass="p-fluid" (onHide)="cancel()">
    <ng-template pTemplate="content">
    <form [formGroup]="formModel">
        <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col-12 p-md-3">
                <label>Nombre</label>
                <input readonly= "true" type="text" formControlName="nombre" [(ngModel)]="empleado.nombre" pInputText>
            </div>
            <div class="p-field p-col-12 p-md-3">
                <label>Primer apellido</label>
                <input readonly= "true" type="text" formControlName="apellido1" [(ngModel)]="empleado.apellido1"  pInputText>
            </div>
            <div class="p-field p-col-12 p-md-3">
                <label>Segundo apellido</label>
                <input readonly= "true" type="text" formControlName="apellido2" [(ngModel)]="empleado.apellido2"  pInputText>
            </div>
            <div class="p-field p-col-12 p-md-3">
                <label>Fecha de nacimiento</label>
                <input readonly= "true" type="text" formControlName="fechaNac" [(ngModel)]="empleado.fecha_nacimiento" pInputText>
            </div>  
            <div class="p-field p-col-12 p-md-3">
                <label>DNI/NIF/NIE</label>
                <input readonly= "true" type="text" formControlName="nif" [(ngModel)]="empleado.nif" pInputText>
            </div>
            <div class="p-field p-col-12 p-md-3">
                <label>Correo electrónico</label>
                <input readonly= "true" type="text" formControlName="email" [(ngModel)]="empleado.email"  pInputText>
            </div>
            <div class="p-field p-col-12 p-md-3">
                <label>Fecha alta en el sistema</label>
                <input readonly= "true" type="text" formControlName="fechaAlta" [(ngModel)]="empleado.fecha_creacion" pInputText>
            </div>         
        </div>
    </form>
         <h5 *ngIf="vacunas.length === 0">Sin vacunas añadidas al sistema</h5>
         <p-table *ngIf="vacunas.length > 0" [value]="vacunas" styleClass="p-datatable-sm" responsiveLayout="scroll" [rows]="5" [paginator]="true" [totalRecords]="totalRecordsVacuna" [rowsPerPageOptions]="[5,10,15]" styleClass="p-datatable-responsive-demo">
            <ng-template pTemplate="caption">
                Vacunas
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th>Tipo</th>
                    <th>Pauta completa</th>
                    <th>Fecha vacuna</th>
                    <th>Certificado</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-vacuna>
                <tr>
                    <td>{{vacuna.nombre}}</td>
                    <td>{{vacuna.pauta_completa}}</td>
                    <td>{{vacuna.fecha_vacuna}}</td>
                    <td>
                        <button pButton pRipple icon="pi pi-download" class="p-button-rounded p-mr-2" (click)="downloadVacuna(vacuna)"></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>

        <div class="p-pt-5">
        <h5 *ngIf="tests.length === 0">Sin tests añadidos al sistema</h5>
         <p-table *ngIf="tests.length > 0" [value]="tests" styleClass="p-datatable-sm" responsiveLayout="scroll" [rows]="5" [paginator]="true" [totalRecords]="totalRecordsTest" [rowsPerPageOptions]="[5,10,15]" styleClass="p-datatable-responsive-demo">
            <ng-template pTemplate="caption">
                Tests
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th>Tipo</th>
                    <th>Resultado</th>
                    <th>Fecha test</th>
                    <th>Archivo</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-test>
                <tr>
                    <td>{{test.nombre}}</td>
                    <td>{{test.resultado}}</td>
                    <td>{{test.fecha_test}}</td>
                    <td>
                        <button pButton pRipple icon="pi pi-download" class="p-button-rounded p-mr-2" (click)="downloadTest(test)"></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
    </ng-template>
    
    <ng-template pTemplate="footer">
        <button pButton pRipple label="Aceptar" icon="pi pi-check" class="p-button-text" (click)="aceptar()"></button>
    </ng-template>
</p-dialog>
